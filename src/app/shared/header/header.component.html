<!-- ============================================================== -->
<!-- Topbar header - style you can find in pages.scss -->
<!-- ============================================================== -->
<header class="topbar">
    <nav class="navbar top-navbar navbar-expand-md navbar-light">
        <!-- ============================================================== -->
        <!-- Logo -->
        <!-- ============================================================== -->
        <div class="navbar-header">
            <a class="navbar-brand" routerLink="/dashboard">
                <!-- Logo icon --><b>
                    <!--You can put here icon as well // <i class="wi wi-sunset"></i> //-->
                    <!-- Dark Logo icon -->
                    <img src="./assets/svg/logo_Mallconnect.svg" style="width: 100%; height: 45px;" alt="homepage" class="dark-logo" />
                    <!-- <img src="./assets/images/logo-icon.png" alt="homepage" class="dark-logo" /> -->
                    <!-- Light Logo icon -->
                    <img src="./assets/svg/logo_Mallconnect.svg" style="width: 100%; height: 45px;" alt="homepage" class="light-logo" />
                </b>
                <!--End Logo icon -->
                <!-- Logo text --><span>
                    <!-- dark Logo text -->
                    <img src="./assets/images/logo-text.png" alt="homepage" class="dark-logo" />
                    <!-- Light Logo text -->
                    <img src="./assets/images/logo-light-text.png" class="light-logo" alt="homepage" /></span> </a>
        </div>
        <!-- ============================================================== -->
        <!-- End Logo -->
        <!-- ============================================================== -->
        <div class="navbar-collapse">
            <!-- ============================================================== -->
            <!-- toggle and nav items -->
            <!-- ============================================================== -->
            <ul class="navbar-nav mr-auto">
                <!-- This is  -->
                <li class="nav-item"> <a class="nav-link nav-toggler hidden-md-up waves-effect waves-dark" href="javascript:void(0)"><i class="ti-menu"></i></a> </li>
                <li class="nav-item"> <a class="nav-link sidebartoggler hidden-sm-down waves-effect waves-dark" href="javascript:void(0)"><i class="ti-menu"></i></a> </li>
                <li class="nav-item hidden-sm-down"></li>
            </ul>
            <!-- ============================================================== -->
            <!-- User profile and search -->
            <!-- ============================================================== -->
            <ul class="navbar-nav my-lg-0">
                <!-- ============================================================== -->
                <!-- Search -->
                <!-- ============================================================== -->
                <li class="nav-item hidden-xs-down search-box"> <a class="nav-link hidden-sm-down waves-effect waves-dark" href="javascript:void(0)"><i class="ti-search"></i></a>
                    <form class="app-search" (submit)="buscar(txtTermino.value)">
                        <input type="text" class="form-control" placeholder="Buscar" #txtTermino>
                        <a class="srh-btn"><i class="ti-close"></i></a>
                    </form>
                </li>
                <!-- ============================================================== -->
                <!-- Ventas Recientes -->
                <!-- ============================================================== -->
                <!-- <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle waves-effect waves-dark" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="mdi mdi-message"></i>
                        <div class="notify"> <span class="heartbit"></span> <span class="point"></span> </div>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right mailbox animated fadeIn fast">
                        <ul>
                            <li>
                                <div class="drop-title">Ventas Recientes</div>
                            </li>
                            <li>
                                <div class="message-center">
                                    
                                    <a href="#">
                                        <div class="btn btn-danger btn-circle"><i class="fa fa-link"></i></div>
                                        <div class="mail-contnet">
                                            <h5>Luanch Admin</h5> <span class="mail-desc">Just see the my new admin!</span> <span class="time">9:30 AM</span> </div>
                                    </a>
                                    
                                    <a href="#">
                                        <div class="btn btn-success btn-circle"><i class="ti-calendar"></i></div>
                                        <div class="mail-contnet">
                                            <h5>Event today</h5> <span class="mail-desc">Just a reminder that you have event</span> <span class="time">9:10 AM</span> </div>
                                    </a>
                                    
                                    <a href="#">
                                        <div class="btn btn-info btn-circle"><i class="ti-settings"></i></div>
                                        <div class="mail-contnet">
                                            <h5>Settings</h5> <span class="mail-desc">You can customize this template as you want</span> <span class="time">9:08 AM</span> </div>
                                    </a>
                                    <a href="#">
                                        <div class="btn btn-primary btn-circle"><i class="ti-user"></i></div>
                                        <div class="mail-contnet">
                                            <h5>Pavan kumar</h5> <span class="mail-desc">Just see the my admin!</span> <span class="time">9:02 AM</span> </div>
                                    </a>
                                </div>
                            </li>
                            <li>
                                <a class="nav-link text-center" routerLink="/dashboard/ventas/modulo"> <strong>Ver Todas</strong> <i class="fa fa-angle-right"></i> </a>
                            </li>
                        </ul>
                    </div>
                </li> -->
                <!-- ============================================================== -->
                <!-- End Ventas Recientes -->
                <!-- ============================================================== -->
                <!-- ============================================================== -->
                <!-- Messages -->
                <!-- ============================================================== -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle waves-effect waves-dark" href="" id="2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="mdi mdi-email"></i>
                        <div class="notify">
                            <div *ngIf="mensajes.length < 0"></div>
                            <div *ngIf="mensajes.length > 0">
                                <span class="heartbit"></span> <span class="point"></span>
                            </div>
                        </div>
                    </a>
                    <div class="dropdown-menu mailbox dropdown-menu-right animated fadeIn fast" aria-labelledby="2">
                        <ul>
                            <li>
                                <div class="drop-title">{{'You have'| translate}} {{mensajes.length}} {{'new messages'| translate}}</div>
                            </li>
                            <li>
                                <div class="message-center" *ngFor="let item of mensajes| slice: (page-1) * pageSize : (page-1) * pageSize + pageSize">
                                    <!-- Message -->
                                    <a routerLink="contacto">
                                        <div class="user-img"> <img src="./assets/images/user.png" alt="user" class="img-circle"> <span class="profile-status online pull-right"></span> </div>
                                        <div class="mail-contnet">
                                            <h5>{{item.nombres}}</h5> <span class="mail-desc">{{item.tema}}</span> <span class="time">{{item.createdAt|date :'MMM d, y, h:mm:ss a'}}</span> </div>
                                    </a>
                                </div>
                            </li>
                            <li>
                                <a class="nav-link text-center" routerLink="contacto"> <strong>{{'See all'| translate}}</strong> <i class="fa fa-angle-right"></i> </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <!-- ============================================================== -->
                <!-- End Messages -->
                <!-- ============================================================== -->

                <!-- Cart menu-->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle waves-effect waves-dark" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <!-- <span class="navbar-tool-label">{{carrito.cantidad}}</span>  -->
                    
                        <i class="fa fa-shopping-bag "></i> &nbsp; ${{subtotal}}
                    </a>
                    <div class="dropdown-menu dropdown-menu-right animated bounceInDown cartlist">
                        <!-- *ngIf="carrito.cantidad != 0" -->
                        <!-- <div class="dropdown-item cartlist">
                            <div style="height: 15rem;" data-simplebar data-simplebar-auto-hide="false">
                                <div class="widget-cart-item pb-2 border-bottom" *ngFor="let item of carrito">
                                    <button class="close text-danger" type="button" aria-label="Remove" (click)="remove_producto(item._id)">
                                      <span aria-hidden="true">&times;</span>
                                    </button>
                                    <div class="media align-items-center">
                                        <div *ngIf="item.producto" style="display:flex">
                                            <a class="d-block mr-2" [routerLink]="['../producto/',item.producto._id]">
                                                <img width="64" [src]="item.producto.img | imagenPipe: 'productos'" alt="Product" />
                                            </a>
                                            <div class="media-body">
                                                <h6 class="widget-product-title"><a [routerLink]="['../producto/',item.producto._id]">{{item.producto.titulo.substr(0,25)}}</a></h6>
                                                <div class="widget-product-meta"><span class="text-accent mr-2">${{item.precio}}</span><span class="text-muted">x {{item.cantidad}}</span></div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>
                            <div class="subtotal">
                                <div class="font-size-sm mr-2 py-2">
                                    <span class="text-muted">Subtotal:</span>
                                    <span class="text-accent font-size-base ml-1">${{subtotal}}</span>
                                </div>

                            </div>
                            <a class="btn btn-primary btn-sm btn-block" [routerLink]="['/dashboard/carrito']">
                                <i class="czi-card mr-2 font-size-base align-middle"></i>Carrito completo
                            </a>
                        </div> -->
                        
                        <!-- formato del carrito en header por Jose Prados -->
                        <div class="dropdown-item p-4 border border-top-0 border-left-0 border-right-0 border-secondary" *ngFor="let item of carrito">
                            <button class="close text-danger" type="button" aria-label="Remove" (click)="remove_producto(item._id)">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            <li class="d-block" style="font-size: 0.7rem;">
                                <div *ngIf="item.producto" style="display:flex">
                                    <div *ngIf="item.producto.img">
                                        <a class="d-block mr-2" [routerLink]="['../producto/',item.producto._id]">
                                            <img width="64" [src]="item.producto.img | imagenPipe: 'productos'" alt="Product" />
                                        </a>
                                    </div>
                                    <div class="media-body">
                                        <h6 class="widget-product-title"><a [routerLink]="['../producto/',item.producto._id]">{{item.producto.titulo.substr(0,25)}}</a></h6>
                                        <div class="widget-product-meta"><span class="text-accent mr-2">${{item.precio}}</span><span class="text-muted">x {{item.cantidad}}</span></div>
                                    </div>
                                </div>
                            </li>
                            
                        </div>
                        
                        <li class="dropdown-item">
                            <div class="subtotal">
                                <div class="font-size-sm mr-2 py-2">
                                    <span class="text-muted">Subtotal:</span>
                                    <span class="text-accent font-size-base ml-1">${{subtotal}}</span>
                                </div>
                            </div>
                        </li>
                        <li class="dropdown-item">
                            <a class="btn btn-primary btn-sm btn-block" [routerLink]="['/dashboard/carrito']">
                                <i class="czi-cart mr-2 font-size-base align-middle"></i>{{'Ver Carrito' | translate}}
                            </a>
                        </li>

                    </div>
                </li>

                <!-- Cart menu-->

                <!-- ============================================================== -->
                <!-- Language -->
                <!-- ============================================================== -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle waves-effect waves-dark" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i *ngIf="flag" class="flag-icon flag-icon-es"></i>
                        <i *ngIf="!flag" class="flag-icon flag-icon-us"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right animated bounceInDown">
                        <a class="dropdown-item" *ngIf="flag" [ngClass]="{'active': activeLang == 'congeneral.idioma'}" (click)="cambiarLenguaje('en')">
                            <i class="flag-icon flag-icon-us"></i> English
                        </a>
                        <a class="dropdown-item" *ngIf="!flag" [ngClass]="{'active': activeLang == 'congeneral.idioma'}" (click)="cambiarLenguaje('es')">
                            <i class="flag-icon flag-icon-es"></i> Español
                        </a>

                    </div>
                </li>
                <!-- ============================================================== -->
                <!-- Profile -->
                <!-- ============================================================== -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle waves-effect waves-dark" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img src="{{usuario.imagenUrl}}" alt="user" class="profile-pic" /></a>
                    <div class="dropdown-menu dropdown-menu-right animated fadeIn fast">
                        <ul class="dropdown-user">
                            <li>
                                <div class="dw-user-box">
                                    <div class="u-img"><img src="{{usuario.imagenUrl}}" alt="user"></div>
                                    <div class="u-text">
                                        <h4>{{usuario.first_name}} {{usuario.last_name}}</h4>
                                        <small>({{usuario.role}})</small>
                                        <p class="text-muted">
                                            {{usuario.email}}
                                            <!-- {{usuario.email | slice:0:20}}{{(usuario.email.length > 20 ) ? '...': ''}} -->
                                        </p>
                                        <a router-link="/dashboard/perfil" class="btn btn-rounded btn-danger btn-sm">{{ 'View Profile'}}</a></div>
                                </div>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li><a routerLink="./perfil"><i class="ti-user"></i> {{'My Profile'| translate}}</a></li>
                            <li><a href="#"><i class="ti-wallet"></i> {{'My Balance'| translate}}</a></li>
                            <li><a href="#"><i class="ti-email"></i> {{'Inbox'| translate}}</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a routerLink="account-settings"><i class="ti-settings"></i> {{'Account Setting'| translate}}</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a (click)="logout()" class="cursor"><i class="fa fa-power-off"></i> {{'Logout'| translate}}</a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </nav>
</header>
<!-- ============================================================== -->
<!-- End Topbar header -->
<!-- ============================================================== -->